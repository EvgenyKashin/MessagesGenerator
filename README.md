# MessegesGenerator

This repo contains the Python project for downloading and generating new messages from the social network - VK. But it can also be adoptated for another social network. 

## Idea
Messages are generated by bigram or trigram model. Firstly all messages from the one user which appear successively concatenated in a one big message with '.' symbol between connected parts. After that messages are splited into separate words. We want to save the symbols such as '?', '!', '.' from the original messages. Because of it, this symbmols are —Åonsidered like words.

Transition list is generated by loop through all messages, through all pairs (bigram model) or trios (trigram model) of words. Pairs can be duplicated. The greater the number of times the pair appears the greater the probability of generating this pair. Start words are obtained from the begining of each sentence (word after '.', '?',..). Word can also be a smile, for example: 'c:'

Having transition list and start words, it can be generated in a such way (simplified):

1. initialized empty message
2. current_word <- choose random word from the start_words and add it to message
3. current_word <- random word from transition[current_word] and add it to message
4. repeat step 3 until current_word != '.', '?', '!'

Similarly with the trigram model.


Added hokku generator. It generate 3 lines with 5, 7, 5 syllables.
## Usage

Install the Python requirements:
```
pip install -r requirements.txt
```
Create private.py with one line such this:
```python
TOKEN = 'b6846f...'
```
TOKEN is your private key for using VK API. If you haven't the token you can use instruction from official site on insert this link to your favorite browser: 
```
https://oauth.vk.com/authorize?client_id={YOUR_CLIENT_ID}&scope=messages&redirect_uri=https://oauth.vk.com/blank.html&
display=page&response_type=token
```
You can easy get YOUR_CLIENT_ID if you create any application in VK.

After that steps you can call script from command line:
```
python generator.py -i <user_id> -m for generating messages or -h for generating hokku
```
where user_id is id of user from VK. Your should have conversation with this user, because generator will use that messages.
You can look at config.py for some additional settings. All downloaded messages in data folder.

## Using module

For more fine-tuning you can look at this methods:
* download_messages(user_id, max_iter=None) - downloading messages
* read_messages(user_id) - read from file
* generate_messages_bigrams(messages, count=5, start_word=None, min_word=4) - bigram model
* generate_messages_trigrams(messages, count=5, start_word=None, min_word=4) - trigram model. Number of messages should be more than 10000 for normal work
* generate_hokku(messages, start_word=None, count=3, gen_msgs=50) - hokku generation, gen_msgs - size of batch (to speed up generation)

And not stable method (for fun):
* generate_story(messages, length=3, start_word=None) - create short story which consist of length (for default 3) different messages. For using this method you should have a really huge dataset of messages (>50k). length > 3 will lead to very long execution time.